{
  "LinkedTasks": {
    "ef7e1bf3-bac7-4e5b-ba8a-a1d642f9239e": [
      {
        "Id": "2831a40a-71dd-402a-978d-b304597bd7fb",
        "PackageId": "Frends.Sql",
        "PackageVersion": "1.1.31",
        "Name": "Frends.Sql.Sql.ExecuteQuery(InputQuery, Options, CancellationToken)",
        "FrameworkIdentifier": ".NETFramework"
      }
    ]
  },
  "LinkedSubProcess": {},
  "Version": "Acc41",
  "Processes": [
    {
      "Name": "Heroma-Opene Extern lista med befattningskoder från Heroma",
      "Modified": "2022-08-31T20:57:32.59",
      "Modifier": "andreas.nordman@ostersund.se",
      "TagString": null,
      "Tags": [
        "Opene",
        "Heroma",
        "Opene listor"
      ],
      "Description": "En extern lista för e-tjänsteplattformen med befattningskoder från Heroma.",
      "Version": 17,
      "UniqueIdentifier": "ef7e1bf3-bac7-4e5b-ba8a-a1d642f9239e",
      "GraphJson": "",
      "Bpmn": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<bpmn2:definitions xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:bpmn2=\"http://www.omg.org/spec/BPMN/20100524/MODEL\" xmlns:bpmndi=\"http://www.omg.org/spec/BPMN/20100524/DI\" xmlns:dc=\"http://www.omg.org/spec/DD/20100524/DC\" xmlns:di=\"http://www.omg.org/spec/DD/20100524/DI\" id=\"sample-diagram\" targetNamespace=\"http://bpmn.io/schema/bpmn\" xsi:schemaLocation=\"http://www.omg.org/spec/BPMN/20100524/MODEL BPMN20.xsd\"><bpmn2:process id=\"Process_1\" isExecutable=\"false\"><bpmn2:startEvent id=\"StartEvent_UF43RE5N\" name=\"API trigger\"><bpmn2:outgoing>Flow_0ht17r2</bpmn2:outgoing></bpmn2:startEvent><bpmn2:task id=\"Activity_1jc6rbc\" name=\"Sql ExecuteQuery Fetch titles and codes\"><bpmn2:incoming>Flow_0ht17r2</bpmn2:incoming><bpmn2:outgoing>Flow_0nx8ay9</bpmn2:outgoing></bpmn2:task><bpmn2:sequenceFlow id=\"Flow_0ht17r2\" sourceRef=\"StartEvent_UF43RE5N\" targetRef=\"Activity_1jc6rbc\" /><bpmn2:subProcess id=\"Activity_1mtauaw\" name=\"Foreach titles\"><bpmn2:incoming>Flow_12sdrfi</bpmn2:incoming><bpmn2:outgoing>Flow_1ogumsa</bpmn2:outgoing><bpmn2:multiInstanceLoopCharacteristics isSequential=\"true\" /><bpmn2:startEvent id=\"Event_0osigqr\"><bpmn2:outgoing>Flow_11qev1b</bpmn2:outgoing></bpmn2:startEvent><bpmn2:endEvent id=\"Event_1bpvmlz\"><bpmn2:incoming>Flow_1wfel8v</bpmn2:incoming></bpmn2:endEvent><bpmn2:scriptTask id=\"Activity_0qg27rn\" name=\"Add to list\"><bpmn2:incoming>Flow_11qev1b</bpmn2:incoming><bpmn2:outgoing>Flow_1wfel8v</bpmn2:outgoing></bpmn2:scriptTask><bpmn2:sequenceFlow id=\"Flow_1wfel8v\" sourceRef=\"Activity_0qg27rn\" targetRef=\"Event_1bpvmlz\" /><bpmn2:sequenceFlow id=\"Flow_11qev1b\" sourceRef=\"Event_0osigqr\" targetRef=\"Activity_0qg27rn\" /></bpmn2:subProcess><bpmn2:scriptTask id=\"Activity_1q2fu7q\" name=\"Assign list\"><bpmn2:incoming>Flow_0nx8ay9</bpmn2:incoming><bpmn2:outgoing>Flow_12sdrfi</bpmn2:outgoing></bpmn2:scriptTask><bpmn2:sequenceFlow id=\"Flow_12sdrfi\" sourceRef=\"Activity_1q2fu7q\" targetRef=\"Activity_1mtauaw\" /><bpmn2:endEvent id=\"Event_1k1hz3c\"><bpmn2:incoming>Flow_1ogumsa</bpmn2:incoming></bpmn2:endEvent><bpmn2:sequenceFlow id=\"Flow_1ogumsa\" sourceRef=\"Activity_1mtauaw\" targetRef=\"Event_1k1hz3c\" /><bpmn2:sequenceFlow id=\"Flow_0nx8ay9\" sourceRef=\"Activity_1jc6rbc\" targetRef=\"Activity_1q2fu7q\" /><bpmn2:textAnnotation id=\"TextAnnotation_0sjfhng\"><bpmn2:text>Returnerar listan till e-tjänsteplattformen i JSON-format.</bpmn2:text></bpmn2:textAnnotation><bpmn2:association id=\"Association_1q99xsy\" sourceRef=\"Event_1k1hz3c\" targetRef=\"TextAnnotation_0sjfhng\" /></bpmn2:process><bpmndi:BPMNDiagram id=\"BPMNDiagram_1\"><bpmndi:BPMNPlane id=\"BPMNPlane_1\" bpmnElement=\"Process_1\"><bpmndi:BPMNShape id=\"TextAnnotation_0sjfhng_di\" bpmnElement=\"TextAnnotation_0sjfhng\"><dc:Bounds x=\"1120\" y=\"70\" width=\"230\" height=\"40\" /></bpmndi:BPMNShape><bpmndi:BPMNEdge id=\"Flow_0nx8ay9_di\" bpmnElement=\"Flow_0nx8ay9\"><di:waypoint x=\"490\" y=\"170\" /><di:waypoint x=\"531\" y=\"170\" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id=\"Flow_1ogumsa_di\" bpmnElement=\"Flow_1ogumsa\"><di:waypoint x=\"1010\" y=\"170\" /><di:waypoint x=\"1082\" y=\"170\" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id=\"Flow_12sdrfi_di\" bpmnElement=\"Flow_12sdrfi\"><di:waypoint x=\"561\" y=\"171\" /><di:waypoint x=\"610\" y=\"171\" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id=\"Flow_0ht17r2_di\" bpmnElement=\"Flow_0ht17r2\"><di:waypoint x=\"338\" y=\"170\" /><di:waypoint x=\"390\" y=\"170\" /></bpmndi:BPMNEdge><bpmndi:BPMNShape id=\"StartEvent_UF43RE5N_di\" bpmnElement=\"StartEvent_UF43RE5N\"><dc:Bounds x=\"302\" y=\"152\" width=\"36\" height=\"36\" /><bpmndi:BPMNLabel><dc:Bounds x=\"295\" y=\"195\" width=\"53\" height=\"14\" /></bpmndi:BPMNLabel></bpmndi:BPMNShape><bpmndi:BPMNShape id=\"Activity_1jc6rbc_di\" bpmnElement=\"Activity_1jc6rbc\"><dc:Bounds x=\"390\" y=\"130\" width=\"100\" height=\"80\" /></bpmndi:BPMNShape><bpmndi:BPMNShape id=\"Activity_1mtauaw_di\" bpmnElement=\"Activity_1mtauaw\" isExpanded=\"true\"><dc:Bounds x=\"610\" y=\"70\" width=\"400\" height=\"200\" /></bpmndi:BPMNShape><bpmndi:BPMNEdge id=\"Flow_11qev1b_di\" bpmnElement=\"Flow_11qev1b\"><di:waypoint x=\"686\" y=\"170\" /><di:waypoint x=\"805\" y=\"170\" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id=\"Flow_1wfel8v_di\" bpmnElement=\"Flow_1wfel8v\"><di:waypoint x=\"835\" y=\"170\" /><di:waypoint x=\"952\" y=\"170\" /></bpmndi:BPMNEdge><bpmndi:BPMNShape id=\"Event_0osigqr_di\" bpmnElement=\"Event_0osigqr\"><dc:Bounds x=\"650\" y=\"152\" width=\"36\" height=\"36\" /></bpmndi:BPMNShape><bpmndi:BPMNShape id=\"Event_1bpvmlz_di\" bpmnElement=\"Event_1bpvmlz\"><dc:Bounds x=\"952\" y=\"152\" width=\"36\" height=\"36\" /></bpmndi:BPMNShape><bpmndi:BPMNShape id=\"Activity_0qg27rn_di\" bpmnElement=\"Activity_0qg27rn\"><dc:Bounds x=\"805\" y=\"155\" width=\"30\" height=\"30\" /></bpmndi:BPMNShape><bpmndi:BPMNShape id=\"Activity_1q2fu7q_di\" bpmnElement=\"Activity_1q2fu7q\"><dc:Bounds x=\"531\" y=\"156\" width=\"30\" height=\"30\" /></bpmndi:BPMNShape><bpmndi:BPMNShape id=\"Event_1k1hz3c_di\" bpmnElement=\"Event_1k1hz3c\"><dc:Bounds x=\"1082\" y=\"152\" width=\"36\" height=\"36\" /></bpmndi:BPMNShape><bpmndi:BPMNEdge id=\"Association_1q99xsy_di\" bpmnElement=\"Association_1q99xsy\"><di:waypoint x=\"1111\" y=\"156\" /><di:waypoint x=\"1149\" y=\"110\" /></bpmndi:BPMNEdge></bpmndi:BPMNPlane></bpmndi:BPMNDiagram></bpmn2:definitions>",
      "ElementParameters": "[{\"Id\":\"StartEvent_UF43RE5N\",\"Type\":0,\"Parameters\":{\"routeTemplate\":\"api/opene/rest/listor/heroma/befattningskoder\",\"isPrivate\":false,\"corsEnabled\":false,\"allowedOrigins\":\"\",\"allowedSchemes\":\"HTTPS\",\"httpMethod\":\"GET\",\"references\":[\"data\",\"data.username\",\"data.httpBody\",\"data.httpMethod\",\"data.httpRequestUri\",\"data.httpClientIp\",\"data.httpCookies\",\"data.body\",\"data.path\",\"data.query\",\"data.header\"],\"openApiDocument\":\"openapi: 3.0.1\\ninfo:\\n  title: Opene - Externa listor\\n  description: \\\"En externa lista är en lista med alternativ till t.ex en kryssruta eller radioknapp i e-tjänsten. Dessa apier returnerar en lista till en sådan fråga i e-tjänsten.\\\\nEn del listor är direkt kopplade mot något verksamhetssystem / ärendehanteringssytem eller direkt mot en databas. Medans vissa listor kan vara enklare där vi läser in alternativen ifrån en vanlig textfil.\\\\nVissa listor kan ha stöd för attributfiltering vilket innebär att man kan sätta attributvärden för att begränsa alternativen i e-tjänsten.\\\"\\n  contact:\\n    name: Andreas Nordman\\n    email: andreas.nordman@ostersund.se\\n  version: 1.0.8\\nservers:\\n  - url: /api/opene/rest/listor\\n    variables:\\n      scheme:\\n        default: https\\n        enum:\\n          - https\\npaths:\\n  /heroma/befattningskoder:\\n    get:\\n      tags:\\n        - Heroma\\n      summary: En lista med befattningskoder från Heroma.\\n      responses:\\n        '200':\\n          description: Lista med befattningskoder likt den här nedan returneras.\\n          content:\\n            application/json:\\n              example:\\n                - key: '0'\\n                  value: Kock(8485)\\n                - key: '1'\\n                  value: ADB-tekniker(0768)\\n                - key: '2'\\ntags:\\n  - name: Testlistor\\n    description: Några testlistor\\n  - name: Heroma\\n    description: Listor med koppling mot Heromas databas / filer.\\n  - name: Opene\",\"basePath\":\"/api/opene/rest/listor\",\"auth\":\"None\",\"oAuth2Options\":null},\"SelectedTypeId\":\"HttpApiTrigger\",\"PromoteResultAs\":null,\"Name\":\"API trigger\",\"Description\":null,\"IsDefault\":null,\"ShouldRetry\":null,\"MaxRetryCount\":null,\"ShouldNotLogResult\":null},{\"Id\":\"Activity_1jc6rbc\",\"Type\":1,\"Parameters\":{\"input\":{\"Query\":{\"mode\":\"sql\",\"value\":\"SET Nocount ON\\r\\nSELECT DISTINCT LTRIM(RTRIM(A.KATBEN)) + ' (' + LTRIM(RTRIM(A.KAT)) + ')' value\\r\\nFROM KP.ANSTAELLNING A\\r\\nWHERE (A.IDNR LIKE '1%') AND A.KATBEN <> ''\\r\\nAND A.FOM <= GETDATE() AND (A.TOM >= GETDATE() -30 OR A.TOM IS NULL)\\r\\nORDER BY value\"},\"Parameters\":[],\"ConnectionString\":{\"mode\":\"csharp\",\"value\":\"#env.HeromaSQLConnectionstring\"}},\"options\":{\"CommandTimeoutSeconds\":{\"mode\":\"integer\",\"value\":60},\"SqlTransactionIsolationLevel\":{\"mode\":\"select\",\"value\":\"Default\"}},\"cancellationToken\":null},\"SelectedTypeId\":\"/ProcessTask/2831a40a-71dd-402a-978d-b304597bd7fb/v1\",\"PromoteResultAs\":null,\"Name\":\"Sql ExecuteQuery Fetch titles and codes\",\"Description\":null,\"IsDefault\":null,\"ShouldRetry\":false,\"MaxRetryCount\":null,\"ShouldNotLogResult\":null},{\"Id\":\"Event_0osigqr\",\"Type\":13,\"Parameters\":{},\"SelectedTypeId\":\"\",\"PromoteResultAs\":null,\"Name\":null,\"Description\":null,\"IsDefault\":null,\"ShouldRetry\":null,\"MaxRetryCount\":null,\"ShouldNotLogResult\":null},{\"Id\":\"Activity_1mtauaw\",\"Type\":10,\"Parameters\":{\"variable\":\"title\",\"expression\":{\"mode\":\"csharp\",\"value\":\"#result[Sql ExecuteQuery Fetch titles and codes]\"}},\"SelectedTypeId\":null,\"PromoteResultAs\":null,\"Name\":\"Foreach titles\",\"Description\":null,\"IsDefault\":null,\"ShouldRetry\":null,\"MaxRetryCount\":null,\"ShouldNotLogResult\":null},{\"Id\":\"FrendsTestElementId\",\"Type\":19,\"Parameters\":{\"input\":{\"Query\":{\"mode\":\"sql\",\"value\":\"SET Nocount ON\\nSELECT DISTINCT LTRIM(RTRIM(A.KATBEN)) + ' (' + LTRIM(RTRIM(A.KAT)) + ')' as value\\nFROM KP.ANSTAELLNING AS A\\nWHERE (A.IDNR LIKE '1%') AND A.KATBEN <> ''\\nAND A.FOM <= GETDATE() AND (A.TOM >= GETDATE() -30 OR A.TOM IS NULL)\\nORDER BY value\"},\"ConnectionString\":{\"mode\":\"csharp\",\"value\":\"#env.HeromaSQLConnectionstring\"},\"Parameters\":[]},\"options\":{\"CommandTimeoutSeconds\":{\"mode\":\"integer\",\"value\":60},\"SqlTransactionIsolationLevel\":{\"mode\":\"select\",\"value\":\"Default\"}},\"cancellationToken\":null},\"SelectedTypeId\":\"/ProcessTask/2831a40a-71dd-402a-978d-b304597bd7fb/v1\",\"PromoteResultAs\":null,\"Name\":\"Test\",\"Description\":null,\"IsDefault\":null,\"ShouldRetry\":null,\"MaxRetryCount\":null,\"ShouldNotLogResult\":null},{\"Id\":\"Activity_1q2fu7q\",\"Type\":12,\"Parameters\":{\"variableName\":\"list\",\"variableExpression\":{\"mode\":\"csharp\",\"value\":\"new JArray()\"},\"shouldAssignVariable\":{\"mode\":\"toggle\",\"value\":true}},\"SelectedTypeId\":null,\"PromoteResultAs\":null,\"Name\":\"Assign list\",\"Description\":null,\"IsDefault\":null,\"ShouldRetry\":null,\"MaxRetryCount\":null,\"ShouldNotLogResult\":null},{\"Id\":\"Event_1bpvmlz\",\"Type\":5,\"Parameters\":{\"expression\":{\"mode\":\"csharp\",\"value\":\"#var.title\"}},\"SelectedTypeId\":null,\"PromoteResultAs\":null,\"Name\":null,\"Description\":null,\"IsDefault\":null,\"ShouldRetry\":null,\"MaxRetryCount\":null,\"ShouldNotLogResult\":null},{\"Id\":\"Event_1k1hz3c\",\"Type\":5,\"Parameters\":{\"httpResult\":{\"httpStatusCode\":{\"mode\":\"integer\",\"value\":200},\"httpContent\":{\"mode\":\"csharp\",\"value\":\"#var.list.ToString()\"},\"httpContentType\":{\"mode\":\"text\",\"value\":\"application/json\"},\"httpContentEncoding\":{\"mode\":\"text\",\"value\":\"UTF-8\"},\"httpHeaders\":[]}},\"SelectedTypeId\":\"HttpResult\",\"PromoteResultAs\":null,\"Name\":null,\"Description\":null,\"IsDefault\":null,\"ShouldRetry\":null,\"MaxRetryCount\":null,\"ShouldNotLogResult\":null},{\"Id\":\"Activity_0qg27rn\",\"Type\":12,\"Parameters\":{\"variableName\":\"\",\"variableExpression\":{\"mode\":\"csharp\",\"value\":\"#var.list.Add(\\r\\n    new JObject(\\r\\n        new JProperty(\\\"key\\\", #var.title_index.ToString()),\\r\\n        new JProperty(\\\"value\\\", #var.title.value)\\r\\n    )\\r\\n)\"},\"shouldAssignVariable\":{\"mode\":\"toggle\",\"value\":false}},\"SelectedTypeId\":null,\"PromoteResultAs\":null,\"Name\":\"Add to list\",\"Description\":null,\"IsDefault\":null,\"ShouldRetry\":null,\"MaxRetryCount\":null,\"ShouldNotLogResult\":null}]",
      "ManualTriggerJson": "[]",
      "IsSubprocess": false,
      "TriggersJson": "[{\"$type\":\"HttpApiTrigger\",\"config\":{\"routeTemplate\":\"api/opene/rest/listor/heroma/befattningskoder\",\"isPrivate\":false,\"corsEnabled\":false,\"allowedOrigins\":\"\",\"allowedSchemes\":\"HTTPS\",\"httpMethod\":\"GET\",\"references\":[\"data\",\"data.username\",\"data.httpBody\",\"data.httpMethod\",\"data.httpRequestUri\",\"data.httpClientIp\",\"data.httpCookies\",\"data.body\",\"data.path\",\"data.query\",\"data.header\"],\"openApiDocument\":\"openapi: 3.0.1\\ninfo:\\n  title: Opene - Externa listor\\n  description: \\\"En externa lista är en lista med alternativ till t.ex en kryssruta eller radioknapp i e-tjänsten. Dessa apier returnerar en lista till en sådan fråga i e-tjänsten.\\\\nEn del listor är direkt kopplade mot något verksamhetssystem / ärendehanteringssytem eller direkt mot en databas. Medans vissa listor kan vara enklare där vi läser in alternativen ifrån en vanlig textfil.\\\\nVissa listor kan ha stöd för attributfiltering vilket innebär att man kan sätta attributvärden för att begränsa alternativen i e-tjänsten.\\\"\\n  contact:\\n    name: Andreas Nordman\\n    email: andreas.nordman@ostersund.se\\n  version: 1.0.8\\nservers:\\n  - url: /api/opene/rest/listor\\n    variables:\\n      scheme:\\n        default: https\\n        enum:\\n          - https\\npaths:\\n  /heroma/befattningskoder:\\n    get:\\n      tags:\\n        - Heroma\\n      summary: En lista med befattningskoder från Heroma.\\n      responses:\\n        '200':\\n          description: Lista med befattningskoder likt den här nedan returneras.\\n          content:\\n            application/json:\\n              example:\\n                - key: '0'\\n                  value: Kock(8485)\\n                - key: '1'\\n                  value: ADB-tekniker(0768)\\n                - key: '2'\\ntags:\\n  - name: Testlistor\\n    description: Några testlistor\\n  - name: Heroma\\n    description: Listor med koppling mot Heromas databas / filer.\\n  - name: Opene\",\"basePath\":\"/api/opene/rest/listor\",\"auth\":\"None\",\"oAuth2Options\":null},\"name\":\"API trigger\",\"id\":\"StartEvent_UF43RE5N\",\"shouldNotLogParameters\":null}]",
      "AssemblyName": "Frends.ExecutableProcess.frends_INT007Hero",
      "PackageId": "INT007Heroef7e1bf3bac74e5bba8aa1d642f9239e",
      "PackageVersion": "0.1.17.0",
      "UsedTasksJson": "[\"/ProcessTask/2831A40A-71DD-402A-978D-B304597BD7FB/v1\"]",
      "UsedSubprocessesJson": "{}",
      "ProcessExecutionVersion": "4.2.6",
      "FrendsVersion": "5.5.2.557",
      "TargetFramework": "net471",
      "RequiredEnvironmentVariables": [
        "HeromaSQLConnectionstring"
      ],
      "PromotedResultVariablesJson": "[]",
      "MajorVersion": 0,
      "MinorVersion": 1,
      "IsForMonitoringRule": false
    }
  ]
}
